{% extends "base.html.twig" %}
{% block title %}/ Résumé de location {% endblock %}
{% block body %}
{% if app.request.query.get('withAlert') %}
    <div class="alert alert-success p-4 rounded border border-light">
        <h5><b>Bravo !!!</b></h5>
        <p class='h5'>Votre réservation a bien été effectuée pour
            <b>{{ booking.getDuration() }} nuits</b>&nbsp;soit
            <b>{{ booking.getAmount() }} &euro;</b>
            pour la période du <b>{{ booking.startDate | format_datetime('full', 'none', locale='fr')}} au {{ booking.endDate | format_datetime('full', 'none', locale='fr')}}</b> .
            <a 
            class='btn btn-info p-2 mx-3' 
            href="{{ path('get_ad',{'slug':booking.ad.slug}) }}"
            role='button'>
                Détails de l'offre
            </a>
        </p>
    </div>
{% endif %}
{% set author = booking.ad.author %}
<h1 class="text-center mb-5 pb-5 border-bottom border-grey mx-auto"> Résumé de la location <b>{{ booking.getAd().getTitle() }}</b></h1>
<div class="row mx-auto col-12 col-sm-12 col-lg-8 d-flex justify-content-center align-items-baseline">
    <div class="col-sm-12 col-12 col-md-5 col-lg-5 d-flex justify-content-center">
        <dl class="my-1 mt-3 mx-auto col-8 col-md-12 bg bg-light rounded">
            <dt class="my-1 mt-3 mx-auto h3 alert-heading">Votre hôte</dt>
            <dd class="ml-3">
                <a href="{{ path('account_profil', {'slug':author.slug}) }}" 
                    class="text-decoration-none d-flex d-inline align-items-center">
                    <img src="{{ author.picture }}" 
                    alt="image de {{ author.fullname() }}" 
                    class="rounded-circle img-thumbnail thumbail mr-3 mr-md-0 mr-lg-0">
                    <div class="row d-flex align-items-center">
                        <div class="col-12 col-md-12 col-lg-12 d-flex d-wrap justify-content-center mx-auto">{{ author.fullname() }}</div>
                        <div 
                            class="badge badge-primary col-10 col-md-5 col-lg-7 d-flex d-wrap justify-content-center mx-auto">
                            {{ author.ads|length }}
                                {% if author.ads|length>1 %} Annonces  
                                {% else %} Annonce
                                {% endif %}
                        </div>
                    </div>
                </a>
                    <div class="d-flex d-wrap col-12 text-muted">{{ author.introduction }}</div>
            </dd>
            <dt class="my-1 mt-3 mx-auto">Titre de l'annonce choisie</dt>
            <dd class="ml-3">{{ booking.ad.title }}
            <img src="{{ booking.ad.coverImage }}" alt="image de {{booking.ad.title}}" class="img-fluid rounded border border-dark mt-3">
            <p class="mt-2 text-muted">{{ booking.ad.introduction }}</p>
                <div>
                    <a href="{{ path('get_ad',{'slug':booking.ad.slug}) }}" class="badge badge-success">En savoir plus</a>
                </div>
            </dd>
            <dt class="my-1 mt-3 mx-auto">Numéro de réservation</dt>
            <dd class="ml-3">{{ booking.Id }}</dd>
            <dt class="my-1 mt-3 mx-auto">Prise de réservation le :</dt>
            <dd class="ml-3">{{ booking.getCreateAt() | format_datetime('full', 'none', locale='fr') }}</dd>
        </dl>
    </div>
    <div class="col-sm-12 col-12 col-md-5 col-lg-6 d-flex justify-content-center">
        <dl class="my-1 mt-3 mx-auto col-9 bg bg-light rounded">
            <dt class="my-1 mt-3 mx-auto h3 alert-heading">Vos dates</dt>
            <dt class="my-1 mt-3 mx-auto">Date de réservation</dt>
            <dd class="ml-3">
                Du 
                {{ booking.startDate() | format_datetime('full', 'none', locale='fr') }}
                au
                {{ booking.endDate() | format_datetime('full', 'none', locale='fr') }}
            </dd>
            <dt class="my-1 mt-3 mx-auto">Nombre de nuits ({{booking.ad.price}} &euro;/ nuits )</dt>
            <dd class="ml-3">{{ booking.duration }} nuits</dd>
            <dt class="my-1 mt-3 mx-auto">Montant du séjour</dt>
            <dd class="ml-3">{{ booking.amount() }} &euro;</dd>
            <dt class="my-1 mt-3 mx-auto">Mon commentaire</dt>
            <dd class="ml-3">{% if booking.comment %}{{booking.comment}}{% else %}Pas de  commentaires
            {% endif %}</dd>
        </dl>
    </div>
</div>
<div class="endPage"></div>
{% block javascripts %}
    <script src='/public/js/complete_booking.js '></script>
{% endblock %}
{% endblock %}